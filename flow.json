{
  "version": "1.0",
  "start_state": "menu_principal",
  "states": {
    "menu_principal": {
      "reply": [
        "üëã ¬°Hola! Soy Ana, asistente virtual del Dr. David Guzm√°n. ¬øC√≥mo te ayudo hoy?",
        "Responde con el n√∫mero correspondiente a las siguientes opciones:",
        "1. M√°s informaci√≥n de servicios m√©dicos",
        "2. Agendar cita m√©dica",
        "3. Reagendar o cancelar",
        "4. Consultar cita m√©dica",
        "5. Solicitar hablar con el Dr. Guzm√°n",
        "(9 para inicio ‚Ä¢ 0 para atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "servicios",
          "label": "M√°s informaci√≥n de servicios m√©dicos"
        },
        {
          "key": "2",
          "next": "agendar_intro",
          "label": "Agendar cita m√©dica"
        },
        {
          "key": "3",
          "next": "reagendar_intro",
          "label": "Reagendar o cancelar"
        },
        {
          "key": "4",
          "next": "consultar_intro",
          "label": "Consultar cita m√©dica"
        },
        {
          "key": "5",
          "next": "hablar_intro",
          "label": "Solicitar hablar con el Dr. Guzm√°n"
        },
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        },
        {
          "key": "0",
          "next": "menu_principal",
          "label": "Atr√°s"
        }
      ]
    },
    "servicios": {
      "reply": [
        "üíô *Servicios disponibles*:",
        "‚Ä¢ Consulta m√©dica especializada en Diabetes ‚Äî incluye ECG, plan nutricional y educaci√≥n.",
        "‚Ä¢ Consulta de Neuropat√≠a Diab√©tica.",
        "‚Ä¢ Valoraci√≥n de dolor cr√≥nico y riesgo cardio-renal.",
        "üí∞ *Valor de la consulta:* $45.",
        "",
        "Sedes disponibles:",
        "1) Direcci√≥n Guayaquil",
        "2) Direcci√≥n Milagro",
        "",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "direccion_gye",
          "label": "Direcci√≥n Guayaquil"
        },
        {
          "key": "2",
          "next": "direccion_milagro",
          "label": "Direcci√≥n Milagro"
        },
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        },
        {
          "key": "0",
          "next": "menu_principal",
          "label": "Atr√°s"
        }
      ]
    },
    "direccion_gye": {
      "reply": [
        "üè• *Direcci√≥n Guayaquil*:",
        "Hospital de Especialidades (Torre Sur), Consultorio 204 (antigua Cl√≠nica Kennedy Alborada).",
        "üìç Direcci√≥n GPS: https://maps.app.goo.gl/7J8v9V9RJHfxADfz7",
        "",
        "1) Agendar Cita M√©dica",
        "",
        "0) Atr√°s",
        "9) Inicio"
      ],
      "routes": [
        {
          "key": "1",
          "next": "agendar_intro",
          "label": "Agendar Cita M√©dica"
        },
        {
          "key": "0",
          "next": "servicios",
          "label": "Atr√°s"
        },
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        }
      ]
    },
    "direccion_milagro": {
      "reply": [
        "üè• *Direcci√≥n Milagro*:",
        "Cl√≠nica Santa Elena, Av. Crist√≥bal Col√≥n y calle P.J. Montero.",
        "üìç Direcci√≥n GPS: https://maps.app.goo.gl/7hh97D7JDcznqRSK9",
        "",
        "1) Agendar Cita M√©dica",
        "",
        "0) Atr√°s",
        "9) Inicio"
      ],
      "routes": [
        {
          "key": "1",
          "next": "agendar_intro",
          "label": "Agendar Cita M√©dica"
        },
        {
          "key": "0",
          "next": "servicios",
          "label": "Atr√°s"
        },
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        }
      ]
    },
    "agendar_intro": {
      "reply": [
        "Perfecto, vamos a agendar tu cita. Te pedir√© algunos datos.",
        "Primero, ingresa tu n√∫mero de c√©dula o pasaporte (10 d√≠gitos o texto si es pasaporte).",
        "Ejemplo (c√©dula): 0912345678 ‚Ä¢ (pasaporte): P-ABC123",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "continuar",
          "next": "agendar_esperando_dni",
          "label": "Continuar"
        }
      ]
    },
    "agendar_esperando_dni": {
      "reply": [
        "‚úÖ Recibido. Ahora escribe tu nombre y dos apellidos.",
        "Ejemplo: Maria Lopez Garcia",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "continuar",
          "next": "agendar_esperando_nombre",
          "label": "Continuar"
        }
      ]
    },
    "agendar_esperando_nombre": {
      "reply": [
        "Gracias. Indica tu fecha de nacimiento en formato DD-MM-AAAA.",
        "Ejemplo: 20-06-1991",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "continuar",
          "next": "agendar_esperando_fnac",
          "label": "Continuar"
        }
      ]
    },
    "agendar_esperando_fnac": {
      "reply": [
        "Ahora tu n√∫mero de contacto (celular/WhatsApp).",
        "Ejemplo: 09xxxxxxxx",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "continuar",
          "next": "agendar_esperando_telefono",
          "label": "Continuar"
        }
      ]
    },
    "agendar_esperando_telefono": {
      "reply": [
        "Tu correo electr√≥nico. Si no tienes, escribe: ninguno",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "continuar",
          "next": "agendar_esperando_email",
          "label": "Continuar"
        }
      ]
    },
    "agendar_esperando_email": {
      "reply": [
        "Indica el d√≠a que deseas ser atendido. Marca una opci√≥n:",
        "1) Hoy",
        "2) Ma√±ana",
        "3) Esta semana",
        "4) Otra fecha",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "agendar_sede",
          "label": "Hoy"
        },
        {
          "key": "2",
          "next": "agendar_sede",
          "label": "Ma√±ana"
        },
        {
          "key": "3",
          "next": "agendar_sede",
          "label": "Esta semana"
        },
        {
          "key": "4",
          "next": "agendar_sede",
          "label": "Otra fecha"
        }
      ]
    },
    "agendar_sede": {
      "reply": [
        "Selecciona la sede:",
        "1) Guayaquil",
        "2) Milagro",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "agendar_hora",
          "label": "Guayaquil"
        },
        {
          "key": "2",
          "next": "agendar_hora",
          "label": "Milagro"
        }
      ]
    },
    "agendar_hora": {
      "reply": [
        "Selecciona un rango de hora disponible:",
        "1) Ma√±ana",
        "2) Tarde",
        "3) Noche",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "agendar_confirmar",
          "label": "Ma√±ana"
        },
        {
          "key": "2",
          "next": "agendar_confirmar",
          "label": "Tarde"
        },
        {
          "key": "3",
          "next": "agendar_confirmar",
          "label": "Noche"
        }
      ]
    },
    "agendar_confirmar": {
      "reply": [
        "Confirma tu cita:",
        "1) Confirmar",
        "2) Cambiar datos",
        "3) Cancelar agendamiento",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "agendar_ok",
          "label": "Confirmar"
        },
        {
          "key": "2",
          "next": "agendar_intro",
          "label": "Cambiar datos"
        },
        {
          "key": "3",
          "next": "menu_principal",
          "label": "Cancelar agendamiento"
        }
      ]
    },
    "agendar_ok": {
      "reply": [
        "‚úÖ ¬°Listo! Tu cita ha sido registrada.",
        "Recibir√°s un mensaje de confirmaci√≥n con el detalle.",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        },
        {
          "key": "0",
          "next": "menu_principal",
          "label": "Atr√°s"
        }
      ]
    },
    "reagendar_intro": {
      "reply": [
        "Para reagendar o cancelar tu cita necesito verificarte.",
        "Escribe tu c√©dula/pasaporte.",
        "(Luego podr√°s elegir cambiar fecha/hora o anular la cita.)",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "continuar",
          "next": "reagendar_menu",
          "label": "Continuar"
        }
      ]
    },
    "reagendar_menu": {
      "reply": [
        "¬øQu√© deseas hacer?",
        "1) Reagendar (cambiar fecha/hora)",
        "2) Cancelar cita",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "reagendar_captura",
          "label": "Reagendar (cambiar fecha/hora)"
        },
        {
          "key": "2",
          "next": "cancelar_captura",
          "label": "Cancelar cita"
        }
      ]
    },
    "reagendar_captura": {
      "reply": [
        "Indica nueva preferencia de d√≠a:",
        "1) Ma√±ana",
        "2) Esta semana",
        "3) Otra fecha",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "reagendar_hora",
          "label": "Ma√±ana"
        },
        {
          "key": "2",
          "next": "reagendar_hora",
          "label": "Esta semana"
        },
        {
          "key": "3",
          "next": "reagendar_hora",
          "label": "Otra fecha"
        }
      ]
    },
    "reagendar_hora": {
      "reply": [
        "Elige rango de hora:",
        "1) Ma√±ana",
        "2) Tarde",
        "3) Noche",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "reagendar_ok",
          "label": "Ma√±ana"
        },
        {
          "key": "2",
          "next": "reagendar_ok",
          "label": "Tarde"
        },
        {
          "key": "3",
          "next": "reagendar_ok",
          "label": "Noche"
        }
      ]
    },
    "reagendar_ok": {
      "reply": [
        "‚úÖ Cita reagendada correctamente.",
        "Te enviaremos la nueva confirmaci√≥n.",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        },
        {
          "key": "0",
          "next": "menu_principal",
          "label": "Atr√°s"
        }
      ]
    },
    "cancelar_captura": {
      "reply": [
        "¬øConfirmas cancelar tu cita?",
        "1) S√≠, cancelar",
        "2) No, volver",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "1",
          "next": "cancelar_ok",
          "label": "S√≠, cancelar"
        },
        {
          "key": "2",
          "next": "reagendar_menu",
          "label": "No, volver"
        }
      ]
    },
    "cancelar_ok": {
      "reply": [
        "‚ùé Tu cita ha sido cancelada.",
        "Si deseas, puedes agendar otra en cualquier momento.",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        },
        {
          "key": "0",
          "next": "menu_principal",
          "label": "Atr√°s"
        }
      ]
    },
    "consultar_intro": {
      "reply": [
        "Para consultar tu cita, escribe tu c√©dula/pasaporte.",
        "Te devolver√© fecha, hora, sede y recomendaciones.",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "continuar",
          "next": "consultar_ok",
          "label": "Continuar"
        }
      ]
    },
    "consultar_ok": {
      "reply": [
        "Aqu√≠ tienes tu cita:",
        "‚Ä¢ Fecha: {FECHA}",
        "‚Ä¢ Hora: {HORA}",
        "‚Ä¢ Sede: {SEDE}",
        "¬øNecesitas algo m√°s?",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        },
        {
          "key": "0",
          "next": "menu_principal",
          "label": "Atr√°s"
        }
      ]
    },
    "hablar_intro": {
      "reply": [
        "Te conecto con el Dr./Asesor üë©‚Äç‚öïÔ∏èüë®‚Äç‚öïÔ∏è.",
        "Si prefieres, deja tu mensaje y n√∫mero y te llamamos.",
        "(9 inicio ‚Ä¢ 0 atr√°s)"
      ],
      "routes": [
        {
          "key": "9",
          "next": "menu_principal",
          "label": "Inicio"
        },
        {
          "key": "0",
          "next": "menu_principal",
          "label": "Atr√°s"
        }
      ]
    }
  }
}